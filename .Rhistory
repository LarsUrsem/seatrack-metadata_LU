connectSeatrack(Username = "testreader", Password = "testreader",
host = "seatrack.nina.no")
library(seatrackR)
library(seatrackR, lib.loc = "")
devtools::install_github("NINANor/seatrackR", ref = "fix_delete_fnc")
install.packages("devtools")
connectSeatrack(Username = "testreader", Password = "testreader",
host = "seatrack.nina.no")
devtools::install_github("NINANor/seatrackR", ref = "fix_delete_fnc")
connectSeatrack(Username = "testreader", Password = "testreader",
host = "seatrack.nina.no")
library(seatrackR)
connectSeatrack(Username = "testreader", Password = "testreader",
host = "seatrack.nina.no")
species = 'Atlantic puffin'
colony = 'Anda'
spec_col_positions <- seatrackR::getPositions(species = species,
colony = colony)
devtools::load_all()
spec_col_positions <- seatrackR::getPositions(species = species,
colony = colony)
library(lubridate)
spec_col_positions <- seatrackR::getPositions(species = species,
colony = colony)
ind <- seatrackR::getIndividInfo(species = species,
colony = colony)
ind <- seatrackR::getIndividInfo()
ind <- seatrackR::getIndividInfo(colony = 'Anda')
ind <- seatrackR::getIndividInfo(colony = colony)
ind
ind <- seatrackR::getIndividInfo(colony = colony)
# all sessions where birds were tagged as pullus
pul <- ind[ind$status_age %in% c("pullus", "chick") & ind$eventType %in% "Deployment",]
ind_sub <- ind[!is.na(ind$eventType),]
ind_sub$status_age <- "adult"
ind_sub$status_age[ind_sub$session_id %in% pul$session_id] <- "juvenile"
adult_sessions <- ind_sub %>%
filter(status_age == "adult") %>%
pull(session_id)
ind_sub %>%
dplyr::filter(session_id %in% adult_sessions) %>%
count(status_age)
#Match retrieval years to sessions
SEATRACK_logger_info <- seatrackR::getLoggerInfo() %>%
mutate(retrieval_year = year(retrieval_date)) %>%
relocate(retrieval_year)
Year_retrieved <- SEATRACK_logger_info %>%
dplyr::select(session_id, retrieval_year)
spec_col_positions2 <- spec_col_positions %>%
filter(session_id %in% adult_sessions) %>%  # Only include adult tracks
mutate(Year = year(date_time),
month = month(date_time),
W_Year = case_when(month <= 6 ~ paste(Year-1,Year, sep = "/"), # determine which winter each position relates to
month > 6 ~ paste(Year,Year+1, sep = "/")),
individ_Year = paste(individ_id, W_Year, sep = "#") # create a unique identifier per migration track, linked to and individual and winter
) %>%
dplyr::select(session_id,
individ_id,
species,
colony,
lon,
lat,
sex,
col_lon,
col_lat,
Year,
month,
date_time,
W_Year,
individ_Year
) %>%
rename(longitude = lon,
latitude = lat,
lat_colony = col_lat,
lon_colony = col_lon
)%>%
left_join(Year_retrieved, by = "session_id") # include information on when birds were retrieved
pkgdown::build_site()
devtools::check()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
pkgdown::build_site()
devtools::check()
devtools::document()
